{% extends 'core/base.html' %}
{% load static %}

{% block title %}Teacher Profile{% endblock %}

{% block content %}
<div class="container mx-auto mt-10">
  <h1 class="page-title">Teacher Profile</h1>
  <hr class="page-divider">

  <div class="flex items-start space-x-6">
    <!-- Profile Picture -->
     <div class="bg-white shadow-md rounded-lg p-4 w-40 mt-2">
      {% if teacher_profile %}
        <img
          src="{{ teacher_profile.avatar_url }}"
          alt="{{ teacher_user.get_full_name }} profile photo"
          class="h-32 w-32 object-cover rounded-full mx-auto"
        />
      {% else %}
        <img
          src="{% static 'core/img/default-profile.png' %}"
          alt="Default profile"
          class="h-32 w-32 object-cover rounded-full mx-auto"
        />
      {% endif %}
    </div>

    <!-- Profile Details -->
    <div class="flex-1">
      <!-- Profile View Mode -->
      {% if not is_editing %}
        {% if request.user.role == 'teacher' and request.user.id == teacher_user.id %}
          <div class="mt-2 flex space-x-4">
            <!-- Left button -->
            <a href="{% url 'teacher_availability' %}"
              class="btn-primary-alt-lg flex-1">
              <!-- calendar icon -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 mr-2">
                <!-- (Calendar icon path) -->
                <path d="M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" />
                <path fill-rule="evenodd" d="M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z" clip-rule="evenodd" />
              </svg>
              Set Availability
            </a>

            <!-- Right button -->
            <a href="{% url 'teacher_bookings_list' %}"
              class="btn-primary-lg flex-1">
              <!-- calendar-list icon -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 mr-2">
                <!-- (Calendar icon path) -->
                <path d="M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" />
                <path fill-rule="evenodd" d="M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z" clip-rule="evenodd" />
              </svg>
              Your Upcoming Bookings
            </a>
          </div><!--eof mt-2 flex space-x-4 -->
          <hr class="page-divider">
        {% endif %}

        <!-- Book a Meeting button to be shown if student is viewwing the profile -->
        {% if is_student %}
          <div class="mt-2">
            {% if not teacher_profile %}
              <button disabled class="btn-primary-alt-lg w-full opacity-50 cursor-not-allowed">
                Meetings Unavailable (advisor hasn’t set up a profile yet)
              </button>

            {% elif not can_student_book %}
              <a href="{% url 'questionnaire' %}"
                class="btn-primary-alt-lg w-full opacity-90"
                title="Please complete the questionnaire first">
                <!-- icon -->
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 mr-2">
                  <path fill-rule="evenodd" d="M7.502 6h7.128A3.375 3.375 0 0 1 18 9.375v9.375a3 3 0 0 0 3-3V6.108c0-1.505-1.125-2.811-2.664-2.94a48.972 48.972 0 0 0-.673-.05A3 3 0 0 0 15 1.5h-1.5a3 3 0 0 0-2.663 1.618c-.225.015-.45.032-.673.05C8.662 3.295 7.554 4.542 7.502 6ZM13.5 3A1.5 1.5 0 0 0 12 4.5h4.5A1.5 1.5 0 0 0 15 3h-1.5Z" clip-rule="evenodd" />
                  <path fill-rule="evenodd" d="M3 9.375C3 8.339 3.84 7.5 4.875 7.5h9.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V9.375ZM6 12a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V12Zm2.25 0a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM6 15a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V15Zm2.25 0a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM6 18a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V18Zm2.25 0a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd" />
                </svg>
                Complete your questionnaire before you can book a meeting.
              </a>

            {% elif teacher_profile.is_active_advisor %}
              {% if teacher_profile.can_host_online or teacher_profile.can_host_in_person %}
                <a href="{% url 'student_booking_view' %}?advisor={{ teacher_user.id }}" class="btn-primary-alt-lg w-full">
                  <!-- icon -->
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 mr-2">
                    <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z" clip-rule="evenodd" />
                  </svg>
                  Book a Meeting with {{ teacher_user.first_name }} {{ teacher_user.last_name }}
                </a>
              {% else %}
                <button disabled class="btn-primary-alt-lg w-full opacity-50 cursor-not-allowed">
                  <!-- icon -->
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 mr-2">
                    <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z" clip-rule="evenodd" />
                  </svg>
                  Meetings Unavailable
                </button>
              {% endif %}

            {% else %}
              <button disabled class="btn-primary-alt-lg w-full opacity-50 cursor-not-allowed">
                <!-- icon -->
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 mr-2">
                  <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z" clip-rule="evenodd" />
                </svg>
                Meetings Unavailable
              </button>
            {% endif %}

            <hr class="page-divider">
          </div>
        {% endif %}





        <p class="text-lg"><strong>Name:</strong> {{ teacher_user.first_name }} {{ teacher_user.last_name }}</p>
        <p class="text-lg"><strong>Email:</strong> {{ teacher_user.email }}</p>
        <hr class="page-divider">

        <p class="text-lg"><strong>Biography:</strong></p>
        {% if teacher_profile %}
          {% if teacher_profile.biography %}
            <p class="text-gray-800">{{ teacher_profile.biography }}</p>
          {% else %}
            <p class="text-gray-500 italic">Not provided yet. You can edit your profile to add this information.</p>
          {% endif %}
        {% else %}
          <p class="text-gray-500 italic">This advisor hasn’t set up a profile yet.</p>
        {% endif %}
        <hr class="page-divider">

        <!-- Hosting Availability -->
        <p class="text-lg"><strong>Hosting Availability:</strong></p>
        {% if teacher_profile %}
          {% if teacher_profile.can_host_online or teacher_profile.can_host_in_person %}
            <p class="text-gray-800">
              {% if teacher_profile.can_host_online %} ✅ Available for online meetings {% endif %}
              {% if teacher_profile.can_host_in_person %}{% if teacher_profile.can_host_online %} | {% endif %} ✅ Available for In-Person Meetings {% endif %}
            </p>
          {% else %}
            <p class="text-red-600 font-semibold">❌ Not available for meetings</p>
          {% endif %}
        {% else %}
          <p class="text-gray-500 italic">This advisor hasn’t set up a profile yet.</p>
        {% endif %}

        <hr class="page-divider">

        <!-- Advising Status -->
        <p class="text-lg"><strong>Advising Status:</strong></p>
        {% if teacher_profile %}
          <div class="flex items-center space-x-2 {% if teacher_profile.is_active_advisor %}text-green-600{% else %}text-red-600{% endif %} font-semibold">
            {% if teacher_profile.is_active_advisor %}
              <!-- Heroicon Check Circle -->
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4M21 12A9 9 0 1 1 12 3a9 9 0 0 1 9 9z"/>
              </svg>
              <span>Active</span>
            {% else %}
              <!-- Heroicon X Circle -->
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12M21 12A9 9 0 1 1 12 3a9 9 0 0 1 9 9z"/>
              </svg>
              <span>Inactive</span>
            {% endif %}
          </div>
        {% else %}
          <p class="text-gray-500 italic">This advisor hasn’t set up a profile yet.</p>
        {% endif %}




        <hr class="page-divider">

        <!-- Edit Button -->
         <!-- Edit Button -->
        {% if can_edit %}
          {% if request.user.role == 'admin' %}
            <a href="{% url 'teacher_profile_admin' teacher_user.id %}?edit=true"
              class="btn-primary w-full mt-4 mb-20">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5 mr-2">
                <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path>
              </svg>
              <span>Edit Profile</span>
            </a>
          {% else %}
            <a href="?edit=true" class="btn-primary w-full mt-4 mb-20">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5 mr-2">
                <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path>
              </svg>
              <span>Edit Profile</span>
            </a>
          {% endif %}
        {% endif %}

        <!-- Back to Advisor List button for admins and teachers -->
        {% if request.user.role != 'teacher' %}
          <div class="mt-6 mb-20">
            <a href="{% url 'advisors' %}"
              class="btn-primary w-full">
              <!-- Chevron left icon-->
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5 mr-2">
                <path stroke-linecap="round" stroke-linejoin="round" d="m18.75 4.5-7.5 7.5 7.5 7.5m-6-15L5.25 12l7.5 7.5" />
              </svg>
              Back to Advisor List
            </a>
          </div>
        {% endif %}

      {% else %}
      
        <!-- Profile EDIT MODE FORM -->
        <form method="POST" enctype="multipart/form-data" class="mb-10">
          {% csrf_token %}

          <!-- First Name Field -->
          <div class="relative mb-6">
            <input
              type="text"
              name="first_name"
              id="id_first_name"
              value="{{ form.first_name.value|default:'' }}"
              class="peer block min-h-[auto] w-full rounded border-0 bg-white px-3 py-[0.32rem]
                    leading-[2.15] outline-none transition-all duration-200 ease-linear
                    placeholder-transparent peer-focus:text-primary peer-valid:text-primary"
              placeholder="First Name"
              required
            />
            <label
              for="id_first_name"
              class="pointer-events-none absolute left-3 top-0 mb-0 origin-[0_0] truncate
                    pt-[0.37rem] leading-[2.15] text-neutral-500 transition-all duration-200
                    ease-out peer-focus:-translate-y-[1.15rem] peer-focus:scale-[0.8]
                    peer-valid:-translate-y-[1.15rem] peer-valid:scale-[0.8]">
              First Name
            </label>
          </div>

          <!-- Last Name Field -->
          <div class="relative mb-6">
            <input
              type="text"
              name="last_name"
              id="id_last_name"
              value="{{ form.last_name.value|default:'' }}"
              class="peer block min-h-[auto] w-full rounded border-0 bg-white px-3 py-[0.32rem]
                    leading-[2.15] outline-none transition-all duration-200 ease-linear
                    placeholder-transparent peer-focus:text-primary peer-valid:text-primary"
              placeholder="Last Name"
              required
            />
            <label
              for="id_last_name"
              class="pointer-events-none absolute left-3 top-0 mb-0 origin-[0_0] truncate
                    pt-[0.37rem] leading-[2.15] text-neutral-500 transition-all duration-200
                    ease-out peer-focus:-translate-y-[1.15rem] peer-focus:scale-[0.8]
                    peer-valid:-translate-y-[1.15rem] peer-valid:scale-[0.8]">
              Last Name
            </label>
          </div>

          <!-- Email Field -->
          <div class="relative mb-6">
            <input
              type="email"
              name="email"
              id="id_email"
              value="{{ form.email.value|default:'' }}"
              class="peer block min-h-[auto] w-full rounded border-0 bg-white px-3 py-[0.32rem]
                    leading-[2.15] outline-none transition-all duration-200 ease-linear
                    placeholder-transparent peer-focus:text-primary peer-valid:text-primary"
              placeholder="Email Address"
              required
            />
            <label
              for="id_email"
              class="pointer-events-none absolute left-3 top-0 mb-0 origin-[0_0] truncate
                    pt-[0.37rem] leading-[2.15] text-neutral-500 transition-all duration-200
                    ease-out peer-focus:-translate-y-[1.15rem] peer-focus:scale-[0.8]
                    peer-valid:-translate-y-[1.15rem] peer-valid:scale-[0.8]">
              Email Address
            </label>
          </div>

          <!-- Biography Field -->
          <div class="mb-6">
            <label for="id_biography" class="block text-sm font-medium text-gray-700 mb-1">
              Biography
            </label>
            <textarea
              name="biography"
              id="id_biography"
              class="block w-full h-32 rounded-md border border-gray-300 px-3 py-2
                    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
              placeholder="Tell Us About Yourself!"
            >{{ form.biography.value|default:'' }}</textarea>
          </div>


          <hr class="page-divider"> <!-- Divider before Profile Picture -->

          <!-- Profile Picture Upload Section -->
          <div class="mb-6">
            <label for="id_profile_picture" class="block text-lg font-medium text-gray-700 mb-2">Profile Picture</label>

            <!-- Profile Picture Preview -->
            <div class="flex items-center space-x-4">
              <!-- Profile Picture Thumbnail -->
              <div class="w-16 h-16 rounded-full overflow-hidden border border-gray-300">
                <img id="profile-picture-preview"
                  src="{% if teacher_profile %}{{ teacher_profile.avatar_url }}{% else %}{% static 'core/img/default-profile.png' %}{% endif %}"
                  data-default-src="{% static 'core/img/default-profile.png' %}"
                  alt="Current Profile Picture"
                  class="object-cover w-full h-full">
              </div>

              <!-- Styled File Upload Button -->
              <div class="flex-1 relative">
                <!-- File Input -->
                <input type="file" id="id_profile_picture" name="profile_picture" class="hidden" onchange="updateFileName(); updateProfilePicturePreview();">

                <!-- Custom Button -->
                <label for="id_profile_picture"
                  class="btn-primary-sm mt-4">
                  <!-- Upload Icon -->
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5V20.25A2.25 2.25 0 005.25 22.5H18.75A2.25 2.25 0 0021 20.25V16.5M7.5 10.5L12 6M12 6L16.5 10.5M12 6V18" />
                  </svg>
                  Choose File
                </label>

                <!-- Display File Name -->
                <p id="file-name" class="text-sm text-gray-500 mt-1">
                  {% if teacher_profile and teacher_profile.profile_picture %}
                    {{ teacher_profile.profile_picture.name }}
                  {% else %}
                    No file chosen
                  {% endif %}
                </p>
              </div>
            </div>

            <!-- Clear Current Picture -->
            {% if teacher_profile and teacher_profile.profile_picture %}
              <div class="mt-4 flex items-center space-x-2">
                <input type="checkbox" id="clear_id_profile_picture" name="profile_picture-clear" class="form-checkbox h-5 w-5 text-deep-teal border-gray-300 rounded focus:ring-deep-teal">
                <label for="clear_id_profile_picture" class="text-sm text-gray-700">Clear Current Picture</label>
              </div>
            {% endif %}
          </div>

          <hr class="page-divider"> <!-- Divider after Profile picture -->
        
          <!-- In-Person Hosting Availability Toggle -->
          <div class="mb-6">
            <label class="block text-lg font-medium text-gray-700">In-Person Hosting Availability</label>

            <!-- Display Current Status -->
            <p class="text-gray-800 mb-2">
              Current Status: 
              <strong id="in-person-status-text" class="{% if teacher_profile.can_host_in_person %}text-[#10454F]{% else %}text-[#B02907]{% endif %}">
                {% if teacher_profile.can_host_in_person %} 
                  Available for in-person meetings 
                {% else %} 
                  Not available for in-person meetings 
                {% endif %}
              </strong>
            </p>

            <!-- Toggle Styled Button -->
            <label class="inline-flex items-center cursor-pointer">
              <input
                type="checkbox"
                name="can_host_in_person"
                id="can_host_in_person"
                class="hidden"
                {% if teacher_profile.can_host_in_person %}checked{% endif %}
              />

              <span
                id="in-person-toggle-label"
                class="{% if teacher_profile.can_host_in_person %}btn-toggle-off{% else %}btn-toggle-on{% endif %}"
              >
                <!-- Hero Icon -->
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="h-5 w-5 mr-2"
                >
                  {% if teacher_profile.can_host_in_person %}
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M6 18L18 6M6 6l12 12"
                    />
                    <!-- ❌ X Icon (Disable) -->
                  {% else %}
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M5 12l5 5L19 7"
                    />
                    <!-- ✔ Checkmark Icon (Enable) -->
                  {% endif %}
                </svg>

                <span>
                  {% if teacher_profile.can_host_in_person %}
                    Disable In-Person Meetings
                  {% else %}
                    Enable In-Person Meetings
                  {% endif %}
                </span>
              </span>
            </label>
          </div>

          <hr class="page-divider"> <!-- Divider after Toggle -->
          
          <!-- Online Hosting Availability Toggle -->
          <div class="mb-6">
            <label class="block text-lg font-medium text-gray-700">Online Hosting Availability</label>
            
            <!-- Display Current Status -->
            <p class="text-gray-800 mb-2">
              Current Status: 
              <strong
                id="online-status-text"
                class="{% if teacher_profile.can_host_online %}text-[#10454F]{% else %}text-[#B02907]{% endif %}"
              >
                {% if teacher_profile.can_host_online %}
                  Available for online meetings
                {% else %}
                  Not available for online meetings
                {% endif %}
              </strong>
            </p>

            <!-- Toggle Styled Button -->
            <label class="inline-flex items-center cursor-pointer">
              <input
                type="checkbox"
                name="can_host_online"
                id="can_host_online"
                class="hidden"
                {% if teacher_profile.can_host_online %}checked{% endif %}
              >

              <span
                id="online-toggle-label"
                class="{% if teacher_profile.can_host_online %}btn-toggle-off{% else %}btn-toggle-on{% endif %}"
              >
                <!-- Hero Icon -->
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="h-5 w-5 mr-2"
                >
                  {% if teacher_profile.can_host_online %}
                    <!-- ❌ X Icon (Disable) -->
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                  {% else %}
                    <!-- ✔ Checkmark Icon (Enable) -->
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 12l5 5L19 7" />
                  {% endif %}
                </svg>

                <span>
                  {% if teacher_profile.can_host_online %}
                    Disable Online Meetings
                  {% else %}
                    Enable Online Meetings
                  {% endif %}
                </span>
              </span>
            </label>
          </div>

          <hr class="page-divider"> <!-- Divider after Toggle -->
 
          <!-- Toggle Advising Status Section -->
          <div class="mb-6">
            <label class="block text-lg font-medium text-gray-700">Advising Status</label>

            <!-- Display Current Status -->
            <p class="text-gray-800 mb-2">
              Current Status:
              <strong
                id="status-text"
                class="{% if teacher_profile.is_active_advisor %}text-[#10454F]{% else %}text-[#B02907]{% endif %}"
              >
                {% if teacher_profile.is_active_advisor %}Active{% else %}Inactive{% endif %}
              </strong>
            </p>

            <!-- Toggle Checkbox Styled as Button -->
            <label class="inline-flex items-center cursor-pointer">
              <input
                type="checkbox"
                name="is_active_advisor"
                id="is_active_advisor"
                class="hidden"
                {% if teacher_profile.is_active_advisor %}checked{% endif %}
              />
              <span
                id="toggle-label"
                class="{% if teacher_profile.is_active_advisor %}btn-toggle-off{% else %}btn-toggle-on{% endif %}"
              >
                <!-- Icon -->
                <svg xmlns="http://www.w3.org/2000/svg" fill="none"
                    viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                    class="h-5 w-5 mr-2">
                  {% if teacher_profile.is_active_advisor %}
                    <!-- ❌ deactivate icon -->
                    <path stroke-linecap="round" stroke-linejoin="round"
                          d="M6 18L18 6M6 6l12 12"/>
                  {% else %}
                    <!-- ✔ activate icon -->
                    <path stroke-linecap="round" stroke-linejoin="round"
                          d="M5 12l5 5L19 7"/>
                  {% endif %}
                </svg>

                <span>
                  {% if teacher_profile.is_active_advisor %}
                    Deactivate Advising
                  {% else %}
                    Activate Advising
                  {% endif %}
                </span>
              </span>
            </label>
          </div>

          <hr class="page-divider"> <!-- Divider after Toggle button -->

          <!-- Change Your Password Section -->
          <a href="{% url 'password_change' %}" class="btn-primary w-full mt-4">
            <!-- Icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="h-5 w-5 mr-2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 
                  16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 
                  011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 
                  2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 
                  0 015.25 6H10"
              />
            </svg>
            <!-- Text -->
            <span>Change Your Password</span>
          </a>

          <!-- Save and Cancel Buttons -->
          <div class="mt-4 mb-28 flex justify-end space-x-4">
            <button type="submit" class="btn-secondary">
              <!-- Save Icon -->
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 12.5l4 4L19 7M5 12.5H4v5.25A2.25 2.25 0 006.25 20.5h11.5A2.25 2.25 0 0020 18.25V13h-1" />
              </svg>
              Save Profile
            </button>
            {% if request.user.role == 'admin' %}
              <a href="{% url 'teacher_profile_admin' teacher_user.id %}" class="btn-danger">Cancel</a>
            {% else %}
              <a href="{% url 'teacher_profile' %}" class="btn-danger">Cancel</a>
            {% endif %}
          </div>
        </form>
      {% endif %}
    </div>
    
  </div>
  
</div>
{% endblock %}
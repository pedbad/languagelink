{% extends "core/base.html" %}
{% load static %}

{% block title %}Resources for {{ student_profile.user.get_full_name }}{% endblock %}

{% block content %}
<div class="container mx-auto mt-10">
  <h1 class="page-title">
    Resources for {{ student_profile.user.get_full_name }}
  </h1>
  <hr class="page-divider">

  {# render CKEditorâ€™s JS/CSS #}
  {{ note_form.media }}

  {# If teacher, show the add-note form #}
  {% if note_form %}
    <div class="bg-white shadow p-6 rounded mb-8">
      <form method="POST"
            action="?student_id={{ student_profile.user.id }}">
        {% csrf_token %}
        {{ note_form.non_field_errors }}
        {# Floating-label Title field #}
        <div class="relative mb-6">
          <input
            type="text"
            name="{{ note_form.title.html_name }}"
            id="{{ note_form.title.id_for_label }}"
            value="{{ note_form.title.value|default_if_none:'' }}"
            placeholder="Add your title"
            class="peer block w-full rounded border border-gray-300 bg-white px-3 py-[0.32rem]
                  leading-[2.15] outline-none transition-all duration-200 ease-linear
                  placeholder-transparent
                  peer-focus:border-primary-dark-teal peer-focus:ring-primary-dark-teal
                  peer-valid:border-primary-dark-teal"
          />
          <label
            for="{{ note_form.title.id_for_label }}"
            class="pointer-events-none absolute left-3 top-0 mb-0 origin-[0_0] truncate
                  pt-[0.37rem] leading-[2.15] text-neutral-500 transition-all duration-200 ease-out
                  peer-focus:-translate-y-[1.15rem] peer-focus:scale-[0.8]
                  peer-valid:-translate-y-[1.15rem] peer-valid:scale-[0.8]">
            Title
          </label>
          {{ note_form.title.errors }}
        </div>

        <div class="mb-4">
          {{ note_form.content.label_tag }}
          {{ note_form.content }}
          {{ note_form.content.errors }}
        </div>
        <button type="submit" class="btn-primary w-full">
          Add Note
        </button>
      </form>
    </div>
  {% endif %}

  {# List existing notes #}
  {% if notes %}
    <div class="space-y-6">
      {% for note in notes %}
        {% include "users/partials/note_item.html" with note=note %}
      {% endfor %}
    </div>
  {% else %}
    <p class="text-gray-600">No notes yet.</p>
  {% endif %}
</div>


{% endblock %}

{# booking/templates/booking/student_bookings_past.html #}
{% extends "core/base.html" %}
{% block title %}Student Past Bookings{% endblock %}

{% block content %}
  <h1 class="page-title">
    Your Past Bookings
  </h1>
  <hr class="page-divider">

  {# toggle between upcoming & past #}
  {% include "booking/partials/bookings_toggle.html" %}

  {% if bookings %}
    <ul class="space-y-4">
      {% for b in bookings %}
        <li class="w-11/12 mx-auto bg-white p-4 rounded shadow flex items-center space-x-4">
          <img src="{{ b.teacher_avatar }}"
               alt="Advisor avatar"
               class="h-12 w-12 rounded-full object-cover border" />

          <div class="flex-1">
            <p class="text-xl text-warm-brown">
              {{ b.date|date:"F j, Y" }} – {{ b.start_time|time:"H:i" }} to {{ b.end_time|time:"H:i" }}
            </p>

            <p>
              <span class="text-lg font-medium">{{ b.teacher_name }}</span>
              <span class="inline-flex items-center text-sm text-gray-500 ml-4">
                <!-- mail icon -->
                <svg xmlns="http://www.w3.org/2000/svg"
                     class="h-4 w-4 mr-1 text-warm-brown" fill="none"
                     viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path d="M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z" />
                  <path d="M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z" />
                </svg>
                {{ b.teacher_email }}
              </span>
            </p>

            {% if b.student_message %}
              <hr class="mt-1 border-1 border-gray-50">
              <p class="mt-1 text-sm text-gray-700 inline-flex items-start space-x-2">
                <!-- chat bubble icon -->
                <svg xmlns="http://www.w3.org/2000/svg"
                     class="h-4 w-4 flex-shrink-0 text-warm-brown"
                     fill="none" viewBox="0 0 24 24"
                     stroke="currentColor" stroke-width="1.5">
                  <path fill-rule="evenodd"
                        d="M4.848 2.771A49.144 ... Z"
                        clip-rule="evenodd" />
                </svg>
                <span>“{{ b.student_message }}”</span>
              </p>
            {% endif %}
          </div>

          {% if b.teacher_id %}
            <a href="{% url 'teacher_profile_admin' b.teacher_id %}"
               class="inline-flex items-center bg-warm-brown text-white px-3 py-1.5 text-sm font-medium rounded-lg shadow-lg hover:bg-dark-orange">
              <!-- Eye Icon -->
              <svg xmlns="http://www.w3.org/2000/svg"
                    fill="currentColor" viewBox="0 0 24 24"
                    class="h-5 w-5 mr-2">
                <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
                <path fill-rule="evenodd"
                      d="M1.323 11.447C2.811 6.976 7.028 3.75 12.001 
                          3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 
                          0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 
                          0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 
                          0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 
                          5.25 5.25 0 0 1 10.5 0Z" clip-rule="evenodd" />
              </svg>
              View Advisor
            </a>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-gray-600">You have no past bookings.</p>
  {% endif %}

  <hr class="my-6 border-1 border-primary-dark-teal">
  <div class="mt-6 mb-20 text-center">
    <a href="{% url 'student_profile' %}"
       class="flex items-center justify-center bg-deep-teal text-white px-4 py-2 rounded-lg hover:bg-teal-600">
      <!-- Chevron left icon-->
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5 mr-2">
        <path stroke-linecap="round" stroke-linejoin="round" d="m18.75 4.5-7.5 7.5 7.5 7.5m-6-15L5.25 12l7.5 7.5" />
      </svg>
      Back to Profile
    </a>
  </div>
{% endblock %}
